'use strict';function a9_0x2e03(_0x1508ee,_0x2d161c){const _0x3437ad=a9_0x3437();return a9_0x2e03=function(_0x2e031b,_0x41fc33){_0x2e031b=_0x2e031b-0x195;let _0x123cb8=_0x3437ad[_0x2e031b];return _0x123cb8;},a9_0x2e03(_0x1508ee,_0x2d161c);}const a9_0x219f0d=a9_0x2e03;function a9_0x3437(){const _0x18a22a=['__importDefault','?file=','__esModule','setJavaScriptEnabled','491808lMiJWn','/../pdf','replace','next','readFile','compile','validate','puppeteer','2232984bwtAqq','handlebars','toString','File\x20not\x20found','close','utf8','value','then','10vjUktf','promises','filename','generateDataCreate','ConverterService','newPage','base64','426860PAiNNo','@hapi/boom','from','converter','2154504AvRbZv','keys','pdf','default','folder','3rDUrYn','3034251cGTVjj','route','170fYkWUz','extension','config','unlink','27420junfFR','done','__awaiter','find','generateMetadata','4746357cSVuHS','host','launch','uuid','7zXGJZs','throw','message','defineProperty','catch','setContent','readdir','string','generateReplaceData'];a9_0x3437=function(){return _0x18a22a;};return a9_0x3437();}(function(_0xf4db7b,_0x623235){const _0x11801e=a9_0x2e03,_0x4e15f3=_0xf4db7b();while(!![]){try{const _0x431b1b=-parseInt(_0x11801e(0x1bf))/0x1+parseInt(_0x11801e(0x1a8))/0x2*(-parseInt(_0x11801e(0x1c8))/0x3)+parseInt(_0x11801e(0x1cf))/0x4*(parseInt(_0x11801e(0x1cb))/0x5)+parseInt(_0x11801e(0x1b0))/0x6+parseInt(_0x11801e(0x19b))/0x7*(parseInt(_0x11801e(0x1c3))/0x8)+parseInt(_0x11801e(0x1c9))/0x9*(-parseInt(_0x11801e(0x1b8))/0xa)+parseInt(_0x11801e(0x197))/0xb;if(_0x431b1b===_0x623235)break;else _0x4e15f3['push'](_0x4e15f3['shift']());}catch(_0x31a841){_0x4e15f3['push'](_0x4e15f3['shift']());}}}(a9_0x3437,0x484c3));var __awaiter=this&&this[a9_0x219f0d(0x1d1)]||function(_0x146fc3,_0x387793,_0x10918c,_0x24000f){function _0x2bf2a2(_0xd89c0d){return _0xd89c0d instanceof _0x10918c?_0xd89c0d:new _0x10918c(function(_0x4d4ee8){_0x4d4ee8(_0xd89c0d);});}return new(_0x10918c||(_0x10918c=Promise))(function(_0x2bfa4f,_0x405a9c){const _0x4661e4=a9_0x2e03;function _0x16521b(_0xa96741){const _0x58e7be=a9_0x2e03;try{_0x1df1c0(_0x24000f[_0x58e7be(0x1ab)](_0xa96741));}catch(_0x3a5ae8){_0x405a9c(_0x3a5ae8);}}function _0x5bff7d(_0x5e649f){const _0xec5693=a9_0x2e03;try{_0x1df1c0(_0x24000f[_0xec5693(0x19c)](_0x5e649f));}catch(_0xbe2a5f){_0x405a9c(_0xbe2a5f);}}function _0x1df1c0(_0x26d161){const _0xd1e09e=a9_0x2e03;_0x26d161[_0xd1e09e(0x1d0)]?_0x2bfa4f(_0x26d161[_0xd1e09e(0x1b6)]):_0x2bf2a2(_0x26d161[_0xd1e09e(0x1b6)])[_0xd1e09e(0x1b7)](_0x16521b,_0x5bff7d);}_0x1df1c0((_0x24000f=_0x24000f['apply'](_0x146fc3,_0x387793||[]))[_0x4661e4(0x1ab)]());});},__importDefault=this&&this[a9_0x219f0d(0x1a4)]||function(_0x472827){return _0x472827&&_0x472827['__esModule']?_0x472827:{'default':_0x472827};};Object[a9_0x219f0d(0x19e)](exports,a9_0x219f0d(0x1a6),{'value':!![]}),exports[a9_0x219f0d(0x1bc)]=void 0x0;const handlebars_1=__importDefault(require(a9_0x219f0d(0x1b1))),boom_1=__importDefault(require(a9_0x219f0d(0x1c0))),puppeteer_1=__importDefault(require(a9_0x219f0d(0x1af))),fs_1=require('fs'),config_1=require('../config'),uuid_1=require(a9_0x219f0d(0x19a)),joi_1=__importDefault(require('joi'));class ConverterService{constructor(){}[a9_0x219f0d(0x1bb)](_0x537eef){let {format:_0x1c7b6e,width:_0x34b16f,height:_0x2072e9,margin:_0x59e8b1}=_0x537eef;const _0x5be90c=''+(0x0,uuid_1['v4'])();return{'config':{'path':ConverterService['folder']+'/'+_0x5be90c+'.'+ConverterService['extension'],'printBackground':!![],'format':_0x1c7b6e,'width':_0x34b16f,'height':_0x2072e9,'margin':_0x59e8b1},'filename':_0x5be90c};}['generateMetadata'](_0x595d3a){const _0x3410df=a9_0x219f0d;return{'url':config_1[_0x3410df(0x1cd)][_0x3410df(0x198)]+'/'+ConverterService[_0x3410df(0x1ca)]+_0x3410df(0x1a5)+_0x595d3a,'filename':_0x595d3a};}[a9_0x219f0d(0x1a3)](_0x493df){const _0x363d0e=a9_0x219f0d,_0x397a33=Object[_0x363d0e(0x1c4)](_0x493df!==null&&_0x493df!==void 0x0?_0x493df:{});for(let _0x577b78 of _0x397a33){const {error:_0xe2abbc}=joi_1['default'][_0x363d0e(0x1a2)]()['not']('')[_0x363d0e(0x1be)]()[_0x363d0e(0x1ae)](_0x493df[_0x577b78]);if(_0xe2abbc){_0xe2abbc[_0x363d0e(0x19d)]=_0xe2abbc[_0x363d0e(0x19d)]['replace']('value',_0x577b78);throw boom_1[_0x363d0e(0x1c6)]['badRequest'](_0xe2abbc[_0x363d0e(0x19d)]);}const _0x12668d=Buffer['from'](_0x493df[_0x577b78],_0x363d0e(0x1be))[_0x363d0e(0x1b2)](_0x363d0e(0x1b5));_0x493df[_0x577b78]=_0x12668d;}return _0x493df;}['convert'](_0x12863a){var _0x27364c;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x527e69=a9_0x2e03;try{const _0x47858e=Buffer[_0x527e69(0x1c1)](_0x12863a['html'],_0x527e69(0x1be))[_0x527e69(0x1b2)](_0x527e69(0x1b5)),_0x3c2f80=this[_0x527e69(0x1a3)]((_0x27364c=_0x12863a[_0x527e69(0x1aa)])!==null&&_0x27364c!==void 0x0?_0x27364c:{});let _0x4e0128=handlebars_1[_0x527e69(0x1c6)][_0x527e69(0x1ad)](_0x47858e,{'strict':!![]})(_0x3c2f80);const _0x18f1e6=yield puppeteer_1['default'][_0x527e69(0x199)]({'headless':!![],'args':['--no-sandbox']}),_0x19ad33=yield _0x18f1e6[_0x527e69(0x1bd)]();yield _0x19ad33[_0x527e69(0x1a7)](![]),yield _0x19ad33[_0x527e69(0x1a0)](_0x4e0128);const _0x103ca0=this[_0x527e69(0x1bb)](_0x12863a);return yield _0x19ad33[_0x527e69(0x1c5)](_0x103ca0[_0x527e69(0x1cd)]),yield _0x18f1e6[_0x527e69(0x1b4)](),this[_0x527e69(0x196)](_0x103ca0[_0x527e69(0x1ba)]);}catch(_0x3054bb){throw boom_1[_0x527e69(0x1c6)]['badRequest'](_0x3054bb['message']);}});}['find'](_0x17fa3e){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5c765d=a9_0x2e03;try{_0x17fa3e=_0x17fa3e+'.'+ConverterService[_0x5c765d(0x1cc)];const _0x36ab4a=''+ConverterService[_0x5c765d(0x1c7)],_0x3de54a=yield fs_1[_0x5c765d(0x1b9)][_0x5c765d(0x1a1)](_0x36ab4a),_0x24652f=_0x3de54a[_0x5c765d(0x195)](_0xda866e=>_0xda866e===_0x17fa3e);if(!_0x24652f)throw'';const _0x45d0d4=_0x36ab4a+'/'+_0x17fa3e,_0x1d257d=yield fs_1[_0x5c765d(0x1b9)][_0x5c765d(0x1ac)](_0x45d0d4)[_0x5c765d(0x19f)](_0x468800=>{throw'';});return fs_1[_0x5c765d(0x1b9)][_0x5c765d(0x1ce)](_0x45d0d4),_0x1d257d;}catch(_0x59aca9){throw boom_1['default']['notFound'](_0x5c765d(0x1b3));}});}}exports[a9_0x219f0d(0x1bc)]=ConverterService,ConverterService['folder']=__dirname+a9_0x219f0d(0x1a9),ConverterService[a9_0x219f0d(0x1ca)]=a9_0x219f0d(0x1c2),ConverterService[a9_0x219f0d(0x1cc)]='pdf';
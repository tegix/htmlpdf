'use strict';function a9_0x5992(_0x6d3457,_0x405d13){const _0x1512ad=a9_0x1512();return a9_0x5992=function(_0x59924a,_0x5483a8){_0x59924a=_0x59924a-0x7a;let _0x28c8a4=_0x1512ad[_0x59924a];return _0x28c8a4;},a9_0x5992(_0x6d3457,_0x405d13);}const a9_0x3db1dd=a9_0x5992;(function(_0x2d35e4,_0x53ae10){const _0x273968=a9_0x5992,_0x33a212=_0x2d35e4();while(!![]){try{const _0x11ca01=-parseInt(_0x273968(0x9c))/0x1+parseInt(_0x273968(0x9d))/0x2*(-parseInt(_0x273968(0x88))/0x3)+parseInt(_0x273968(0xb2))/0x4*(-parseInt(_0x273968(0xa6))/0x5)+parseInt(_0x273968(0x8f))/0x6+-parseInt(_0x273968(0x99))/0x7+parseInt(_0x273968(0x7e))/0x8+parseInt(_0x273968(0xad))/0x9;if(_0x11ca01===_0x53ae10)break;else _0x33a212['push'](_0x33a212['shift']());}catch(_0x2837fd){_0x33a212['push'](_0x33a212['shift']());}}}(a9_0x1512,0x77364));var __awaiter=this&&this[a9_0x3db1dd(0xb0)]||function(_0x52930d,_0x5e69ff,_0x240629,_0x4eea40){function _0x302bc6(_0x58962f){return _0x58962f instanceof _0x240629?_0x58962f:new _0x240629(function(_0x94667a){_0x94667a(_0x58962f);});}return new(_0x240629||(_0x240629=Promise))(function(_0x5c0386,_0x2cc16a){function _0x5c68eb(_0x60091f){const _0x53e224=a9_0x5992;try{_0x4314da(_0x4eea40[_0x53e224(0x89)](_0x60091f));}catch(_0x418a15){_0x2cc16a(_0x418a15);}}function _0x43d30b(_0x18b463){try{_0x4314da(_0x4eea40['throw'](_0x18b463));}catch(_0x4fc969){_0x2cc16a(_0x4fc969);}}function _0x4314da(_0x1d81cb){const _0x35498d=a9_0x5992;_0x1d81cb['done']?_0x5c0386(_0x1d81cb[_0x35498d(0xaf)]):_0x302bc6(_0x1d81cb[_0x35498d(0xaf)])[_0x35498d(0x8c)](_0x5c68eb,_0x43d30b);}_0x4314da((_0x4eea40=_0x4eea40['apply'](_0x52930d,_0x5e69ff||[]))['next']());});},__importDefault=this&&this[a9_0x3db1dd(0x91)]||function(_0x7abfe3){const _0x5b722b=a9_0x3db1dd;return _0x7abfe3&&_0x7abfe3[_0x5b722b(0xaa)]?_0x7abfe3:{'default':_0x7abfe3};};Object[a9_0x3db1dd(0x9f)](exports,a9_0x3db1dd(0xaa),{'value':!![]}),exports['ConverterService']=void 0x0;function a9_0x1512(){const _0x4e4207=['uuid','config','launch','newPage','converter','badRequest','9595rsSHVM','@hapi/boom','not','folder','__esModule','?file=','puppeteer','13331313tLNXdD','ConverterService','value','__awaiter','message','1464hsfmcY','extension','string','compile','html','filename','notFound','generateMetadata','2667992bvkFsQ','toString','handlebars','unlink','find','convert','/../pdf','setContent','pdf','close','23367hbgBik','next','setJavaScriptEnabled','base64','then','utf8','validate','5119068MdNZqY','--disable-setuid-sandbox','__importDefault','keys','promises','default','replace','generateDataCreate','--no-sandbox','readFile','1425928cOmeOx','route','from','673831xgsPOf','154wCDPce','File\x20not\x20found','defineProperty'];a9_0x1512=function(){return _0x4e4207;};return a9_0x1512();}const handlebars_1=__importDefault(require(a9_0x3db1dd(0x80))),boom_1=__importDefault(require(a9_0x3db1dd(0xa7))),puppeteer_1=__importDefault(require(a9_0x3db1dd(0xac))),fs_1=require('fs'),config_1=require('../config'),uuid_1=require(a9_0x3db1dd(0xa0)),joi_1=__importDefault(require('joi'));class ConverterService{constructor(){}[a9_0x3db1dd(0x96)](_0xcb70a3){const _0x40d2a1=a9_0x3db1dd;let {format:_0x2b217f,width:_0x197c0a,height:_0x4da6ec,margin:_0xb6af0d}=_0xcb70a3;const _0x14b0e2=''+(0x0,uuid_1['v4'])();return{'config':{'path':ConverterService['folder']+'/'+_0x14b0e2+'.'+ConverterService[_0x40d2a1(0xb3)],'printBackground':!![],'format':_0x2b217f,'width':_0x197c0a,'height':_0x4da6ec,'margin':_0xb6af0d},'filename':_0x14b0e2};}[a9_0x3db1dd(0x7d)](_0xd2311f){const _0x1e31c1=a9_0x3db1dd;return{'url':config_1[_0x1e31c1(0xa1)]['host']+'/'+ConverterService[_0x1e31c1(0x9a)]+_0x1e31c1(0xab)+_0xd2311f,'filename':_0xd2311f};}['generateReplaceData'](_0x36b910){const _0x38893f=a9_0x3db1dd,_0x41ce19=Object[_0x38893f(0x92)](_0x36b910!==null&&_0x36b910!==void 0x0?_0x36b910:{});for(let _0x50eb87 of _0x41ce19){const {error:_0x508979}=joi_1[_0x38893f(0x94)][_0x38893f(0xb4)]()[_0x38893f(0xa8)]('')['base64']()[_0x38893f(0x8e)](_0x36b910[_0x50eb87]);if(_0x508979){_0x508979['message']=_0x508979[_0x38893f(0xb1)][_0x38893f(0x95)]('value',_0x50eb87);throw boom_1[_0x38893f(0x94)][_0x38893f(0xa5)](_0x508979[_0x38893f(0xb1)]);}const _0x5f0981=Buffer[_0x38893f(0x9b)](_0x36b910[_0x50eb87],_0x38893f(0x8b))[_0x38893f(0x7f)](_0x38893f(0x8d));_0x36b910[_0x50eb87]=_0x5f0981;}return _0x36b910;}[a9_0x3db1dd(0x83)](_0x267b43){var _0xcb4f8a;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x9f5508=a9_0x5992;try{const _0x2ef979=Buffer[_0x9f5508(0x9b)](_0x267b43[_0x9f5508(0x7a)],_0x9f5508(0x8b))[_0x9f5508(0x7f)]('utf8'),_0x493227=this['generateReplaceData']((_0xcb4f8a=_0x267b43[_0x9f5508(0x95)])!==null&&_0xcb4f8a!==void 0x0?_0xcb4f8a:{});let _0x48961e=handlebars_1[_0x9f5508(0x94)][_0x9f5508(0xb5)](_0x2ef979,{'strict':!![]})(_0x493227);const _0x49f23b=yield puppeteer_1[_0x9f5508(0x94)][_0x9f5508(0xa2)]({'headless':!![],'args':[_0x9f5508(0x97),_0x9f5508(0x90),'--disable-gpu'],'ignoreDefaultArgs':['--disable-extensions']}),_0xc47ec8=yield _0x49f23b[_0x9f5508(0xa3)]();yield _0xc47ec8[_0x9f5508(0x8a)](![]),yield _0xc47ec8[_0x9f5508(0x85)](_0x48961e);const _0x3c4707=this[_0x9f5508(0x96)](_0x267b43);return yield _0xc47ec8[_0x9f5508(0x86)](_0x3c4707[_0x9f5508(0xa1)]),yield _0x49f23b[_0x9f5508(0x87)](),this[_0x9f5508(0x7d)](_0x3c4707[_0x9f5508(0x7b)]);}catch(_0xc3b833){throw boom_1[_0x9f5508(0x94)]['badRequest'](_0xc3b833[_0x9f5508(0xb1)]);}});}['find'](_0x12913e){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x7acf9c=a9_0x5992;try{_0x12913e=_0x12913e+'.'+ConverterService[_0x7acf9c(0xb3)];const _0x25e5f3=''+ConverterService[_0x7acf9c(0xa9)],_0x206ddd=yield fs_1['promises']['readdir'](_0x25e5f3),_0x1eef01=_0x206ddd[_0x7acf9c(0x82)](_0x57367c=>_0x57367c===_0x12913e);if(!_0x1eef01)throw'';const _0x1a8767=_0x25e5f3+'/'+_0x12913e,_0x145a79=yield fs_1[_0x7acf9c(0x93)][_0x7acf9c(0x98)](_0x1a8767)['catch'](_0x17ce46=>{throw'';});return fs_1[_0x7acf9c(0x93)][_0x7acf9c(0x81)](_0x1a8767),_0x145a79;}catch(_0x195716){throw boom_1['default'][_0x7acf9c(0x7c)](_0x7acf9c(0x9e));}});}}exports[a9_0x3db1dd(0xae)]=ConverterService,ConverterService[a9_0x3db1dd(0xa9)]=__dirname+a9_0x3db1dd(0x84),ConverterService[a9_0x3db1dd(0x9a)]=a9_0x3db1dd(0xa4),ConverterService['extension']='pdf';
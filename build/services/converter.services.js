'use strict';const a10_0x10d791=a10_0x4511;(function(_0x511f19,_0x4fc57d){const _0x151ed9=a10_0x4511,_0x485995=_0x511f19();while(!![]){try{const _0x1b92d9=-parseInt(_0x151ed9(0x151))/0x1+-parseInt(_0x151ed9(0x179))/0x2*(-parseInt(_0x151ed9(0x156))/0x3)+-parseInt(_0x151ed9(0x16b))/0x4*(-parseInt(_0x151ed9(0x158))/0x5)+-parseInt(_0x151ed9(0x15d))/0x6*(parseInt(_0x151ed9(0x16e))/0x7)+parseInt(_0x151ed9(0x153))/0x8+parseInt(_0x151ed9(0x14c))/0x9*(parseInt(_0x151ed9(0x15b))/0xa)+parseInt(_0x151ed9(0x16c))/0xb;if(_0x1b92d9===_0x4fc57d)break;else _0x485995['push'](_0x485995['shift']());}catch(_0x12324d){_0x485995['push'](_0x485995['shift']());}}}(a10_0x5867,0xc3b5f));function a10_0x4511(_0x4d612d,_0x20ee39){const _0x58675e=a10_0x5867();return a10_0x4511=function(_0x451150,_0x1902e2){_0x451150=_0x451150-0x146;let _0x4313cf=_0x58675e[_0x451150];return _0x4313cf;},a10_0x4511(_0x4d612d,_0x20ee39);}var __awaiter=this&&this['__awaiter']||function(_0x241aaa,_0x29e7aa,_0x266e92,_0x336f75){function _0x5d6f4e(_0x750f5d){return _0x750f5d instanceof _0x266e92?_0x750f5d:new _0x266e92(function(_0x46a667){_0x46a667(_0x750f5d);});}return new(_0x266e92||(_0x266e92=Promise))(function(_0x3be0f9,_0x1ae9ad){const _0x2f916a=a10_0x4511;function _0x35bdb6(_0x5c88fe){const _0x51bccc=a10_0x4511;try{_0x416e4f(_0x336f75[_0x51bccc(0x146)](_0x5c88fe));}catch(_0x31848a){_0x1ae9ad(_0x31848a);}}function _0x317301(_0x3811a0){const _0x175671=a10_0x4511;try{_0x416e4f(_0x336f75[_0x175671(0x175)](_0x3811a0));}catch(_0x2bdae4){_0x1ae9ad(_0x2bdae4);}}function _0x416e4f(_0x41f090){const _0xaee7ea=a10_0x4511;_0x41f090[_0xaee7ea(0x14d)]?_0x3be0f9(_0x41f090[_0xaee7ea(0x171)]):_0x5d6f4e(_0x41f090[_0xaee7ea(0x171)])[_0xaee7ea(0x180)](_0x35bdb6,_0x317301);}_0x416e4f((_0x336f75=_0x336f75[_0x2f916a(0x167)](_0x241aaa,_0x29e7aa||[]))['next']());});},__importDefault=this&&this['__importDefault']||function(_0x2e1d93){const _0x33d0e8=a10_0x4511;return _0x2e1d93&&_0x2e1d93[_0x33d0e8(0x150)]?_0x2e1d93:{'default':_0x2e1d93};};Object[a10_0x10d791(0x159)](exports,a10_0x10d791(0x150),{'value':!![]}),exports[a10_0x10d791(0x17f)]=void 0x0;const handlebars_1=__importDefault(require('handlebars')),boom_1=__importDefault(require(a10_0x10d791(0x15e))),puppeteer_1=__importDefault(require(a10_0x10d791(0x15c))),fs_1=require('fs'),config_1=require(a10_0x10d791(0x162)),uuid_1=require(a10_0x10d791(0x181)),joi_1=__importDefault(require(a10_0x10d791(0x178)));class ConverterService{constructor(){}[a10_0x10d791(0x174)](_0x1267d6){const _0x1d2566=a10_0x10d791;let {format:_0x18d4b2,width:_0x55ae5a,height:_0x100fa8,margin:_0x1851a4}=_0x1267d6;const _0x98040f=''+(0x0,uuid_1['v4'])();return{'config':{'path':ConverterService['folder']+'/'+_0x98040f+'.'+ConverterService[_0x1d2566(0x17a)],'printBackground':!![],'format':_0x18d4b2,'width':_0x55ae5a,'height':_0x100fa8,'margin':_0x1851a4},'filename':_0x98040f};}['generateMetadata'](_0x50f43f){const _0x1455f6=a10_0x10d791;return{'url':config_1[_0x1455f6(0x160)][_0x1455f6(0x16d)]+'/'+ConverterService[_0x1455f6(0x182)]+_0x1455f6(0x176)+_0x50f43f,'filename':_0x50f43f};}[a10_0x10d791(0x16a)](_0x3e7ba2){const _0x3df344=a10_0x10d791,_0xabda93=Object[_0x3df344(0x147)](_0x3e7ba2!==null&&_0x3e7ba2!==void 0x0?_0x3e7ba2:{});for(let _0x61d619 of _0xabda93){const {error:_0x60e9f}=joi_1['default']['string']()['not']('')['base64']()[_0x3df344(0x169)](_0x3e7ba2[_0x61d619]);if(_0x60e9f){_0x60e9f[_0x3df344(0x164)]=_0x60e9f[_0x3df344(0x164)][_0x3df344(0x15a)]('value',_0x61d619);throw boom_1[_0x3df344(0x17d)][_0x3df344(0x14e)](_0x60e9f[_0x3df344(0x164)]);}const _0x5bef1b=Buffer[_0x3df344(0x14b)](_0x3e7ba2[_0x61d619],_0x3df344(0x14a))[_0x3df344(0x183)](_0x3df344(0x16f));_0x3e7ba2[_0x61d619]=_0x5bef1b;}return _0x3e7ba2;}[a10_0x10d791(0x163)](_0x4b18ea){var _0x33dd30;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x440c7e=a10_0x4511;try{const _0x3cde3e=Buffer['from'](_0x4b18ea[_0x440c7e(0x148)],_0x440c7e(0x14a))[_0x440c7e(0x183)](_0x440c7e(0x16f)),_0x566714=this['generateReplaceData']((_0x33dd30=_0x4b18ea['replace'])!==null&&_0x33dd30!==void 0x0?_0x33dd30:{});let _0x4360cc=handlebars_1[_0x440c7e(0x17d)]['compile'](_0x3cde3e,{'strict':!![]})(_0x566714);const _0x1897cc=yield puppeteer_1[_0x440c7e(0x17d)]['launch']({'headless':!![],'args':['--no-sandbox',_0x440c7e(0x166),_0x440c7e(0x177)],'ignoreDefaultArgs':[_0x440c7e(0x17e)]}),_0x13276=yield _0x1897cc[_0x440c7e(0x17b)]();yield _0x13276[_0x440c7e(0x173)](![]),yield _0x13276[_0x440c7e(0x154)](_0x4360cc);const _0x1d94d5=this[_0x440c7e(0x174)](_0x4b18ea);return yield _0x13276[_0x440c7e(0x17c)](_0x1d94d5[_0x440c7e(0x160)]),yield _0x1897cc[_0x440c7e(0x165)](),this[_0x440c7e(0x155)](_0x1d94d5[_0x440c7e(0x161)]);}catch(_0xa76256){throw boom_1[_0x440c7e(0x17d)][_0x440c7e(0x14e)](_0xa76256[_0x440c7e(0x164)]);}});}[a10_0x10d791(0x152)](_0x6a8567){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2d3c2e=a10_0x4511;try{_0x6a8567=_0x6a8567+'.'+ConverterService[_0x2d3c2e(0x17a)];const _0x2b5e3c=''+ConverterService[_0x2d3c2e(0x15f)],_0x59feaa=yield fs_1[_0x2d3c2e(0x14f)][_0x2d3c2e(0x170)](_0x2b5e3c),_0x3f32f8=_0x59feaa[_0x2d3c2e(0x152)](_0x494249=>_0x494249===_0x6a8567);if(!_0x3f32f8)throw'';const _0x33c947=_0x2b5e3c+'/'+_0x6a8567,_0x440a97=yield fs_1[_0x2d3c2e(0x14f)][_0x2d3c2e(0x172)](_0x33c947)['catch'](_0x105fcc=>{throw'';});return fs_1['promises'][_0x2d3c2e(0x168)](_0x33c947),_0x440a97;}catch(_0x29111b){throw boom_1['default']['notFound'](_0x2d3c2e(0x149));}});}}function a10_0x5867(){const _0x3563de=['--disable-gpu','joi','34xNsbNr','extension','newPage','pdf','default','--disable-extensions','ConverterService','then','uuid','route','toString','next','keys','html','File\x20not\x20found','base64','from','12555tSCCAQ','done','badRequest','promises','__esModule','1400145XqReVU','find','3869392SIdfEp','setContent','generateMetadata','37974vxsAZD','/../pdf','1145HJzOcF','defineProperty','replace','2110ccEzXp','puppeteer','112872FtQFCB','@hapi/boom','folder','config','filename','../config','convert','message','close','--disable-setuid-sandbox','apply','unlink','validate','generateReplaceData','17616cCcnyo','6132313AOxrmn','host','133xHwmce','utf8','readdir','value','readFile','setJavaScriptEnabled','generateDataCreate','throw','?file='];a10_0x5867=function(){return _0x3563de;};return a10_0x5867();}exports[a10_0x10d791(0x17f)]=ConverterService,ConverterService[a10_0x10d791(0x15f)]=__dirname+a10_0x10d791(0x157),ConverterService[a10_0x10d791(0x182)]='converter',ConverterService[a10_0x10d791(0x17a)]=a10_0x10d791(0x17c);